# 🍽 Perfect Dish



<br />


## 💡 목표

그동안 학습한 기술을 적용해 보자<br>
***메뉴를 등록하고 주문하여 청구서까지✨*** 여러 요구 조건에 맞는 주문 시스템<br>

<br />
<br />

## 🛠 기술 스택

- Java 17
- Spring Boot
- Spring Data JPA
- H2
- JUnit5

<br />
<br />

## ✔️ 기능 목록


### 🥗 Member

1. id를 가지고 있으나 실질적인 pk는 phone number 8자리이다.<br>
회원 조회를 할 때 처음에는 번호(8)에서 뒷번호(4)로 리스트를 만들어 마지막으로 이름으로 필터링하는 방식으로 하였으나<br>
폰번호 8자리가 id와 같은 역할을 하므로 로직의 복잡함을 줄이고자 이름 → 번호 조회로 변경하였다. 
2. soft delete 적용 
회원 정보를 완전히 삭제하지 않고 status flag를 사용하여 회원 정보를 업데이트시켰다. 
(status → DELETED)

<br />

### 🥗 Menu

1. 중복메뉴가 있는지 먼저 확인 후 이미지 객체를 함께 생성한다
2. 이미지는 따로 지정된 경로에 uuid가 더해진(중복 방지) 새로운 이름으로 저장된다. 
3. 메뉴 이미지는 필수가 아니지만 존재한다면 메뉴에도 이미지 주소가 함께 저장된다.
4. discount flag를 통해 bill에서 최종 가격 반환 시 적용된다.
5. 또한 주문 가능 / 불가능을 enum 클래스로 관리하며 order시 적용된다. 
6. 코스 타입별 / 지금 주문 가능한 메뉴별 확인이 가능하다.
7. response(dto)에서는 필요한 정보에 따라 detail한 정보 또는 기본 정보로 데이터가 가공되어 화면에 전달된다.

<br />

### 🥗 Order

1. 메뉴가 존재하는지 확인한다.
2. 사용자로부터 받은 메뉴 이름, 수량을 임베디드 클래스인 orderInfo를 넣어 Order엔티티에 포함했다.
3. 테이블에 따라 추가 주문을 계속 받을 수 있다. 추가 주문이 들어오면 <br>
**자동으로 해당 테이블의 주문을 찾아 같은 메뉴의 이름에 추가된 수량을 적용**한다.<br>
→ 이는 bill에 테이블 번호별 병합된다.
4. 테이블별 모든 주문 / 테이블별 주문 내역 중 서빙되지 않은 주문 / 서빙되지 않은 모든 주문 내역을 각각 확인할 수 있다. 

<br />

### 🥗 Bill

1. 테이블 번호에 따라 각각 쌓인 주문들은 discount 여부에 따라 합계가 도출된다.  
2. order의 주문 상태가 서빙 완료인지 확인 후 bill의 상태를 완료로 적용할 수 있다.
3. 테이블 별 영수증과 을 확인할 수 있다. 
4. response에서는 hashMap에 메뉴 이름과 수량으로 담은 뒤 리스트 화 시켜 더욱 쉽게 확인 할 수 있게 했다. 

<br />

### 🥗 Global

1. service계층을 비즈니스 로직인 ***coreService***와 데이터 조회용 로직인 ***presentationService***로 나누어 확장에 용이하다.
2. **이미지 처리 모듈을 분리해** 둠으로 현재는 menu에서만 활용하지만 추후 다른 파트에서도 사용 가능하도록 했다. 
3. **커스텀 에러 코드**를 적용하여 구체적인 오류 정보를 제공하고 빠르게 파악 가능하다.
4. p6spy를 사용한 **커스텀 쿼리 포맷팅**으로 가독성을 향상했다. 
5. 추상 클래스인 BaseTimeEntity로 createdAt / modifiedAt 관리 - **JPA Auditing**
6. JUnit을 활용한 ***40여 개의 구체적인 테스트 시나리오*** 진행

<br />



